/* src/components/Sections/OrderStatusTracker.module.css */

.trackerWrapper {
  width: 100%;
  padding: 20px;
  margin-bottom: 20px;
  background-color: var(--surface-color);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  animation: fadeIn 0.5s ease-out;
}

.trackerWrapper h4 {
  margin-top: 0;
  margin-bottom: 25px;
  text-align: center;
  font-size: 1.1rem;
  color: var(--text-primary);
}

/* CONTAINER CHÍNH */
.stepContainer {
  display: flex;
  /* Bỏ justify-content: space-between */
  /* Các phần tử con sẽ tự chia đều không gian nhờ flex: 1 */
  width: 100%;
  position: relative;
}

/* MỖI BƯỚC (ITEM) */
.stepItem {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  
  /* QUAN TRỌNG: Để mỗi bước chiếm độ rộng bằng nhau và chạm nhau */
  flex: 1; 
  
  /* Không set width cứng (như 120px) nữa */
}

/* ICON TRÒN (NODE) */
.stepNode {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  /* Đảm bảo màu nền trùng với màu thẻ cha để che đường kẻ đi qua nó */
  background-color: var(--surface-color); 
  border: 2px solid var(--border-color);
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  transition: all 0.4s ease;
  
  /* QUAN TRỌNG: z-index cao hơn connector để icon nằm đè lên đường kẻ */
  position: relative;
  z-index: 2; 
}

/* TÊN BƯỚC */
.stepName {
  margin-top: 10px;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-secondary);
  transition: all 0.4s ease;
  line-height: 1.4;
  padding: 0 5px; /* Thêm chút padding để chữ không bị sát lề nếu dài */
}

/* THANH NỐI (CONNECTOR) */
.stepConnector {
  position: absolute;
  /* Canh giữa theo chiều dọc của Node (45px / 2 = 22.5px) */
  top: 22.5px;
  
  /* Bắt đầu từ tâm của Node hiện tại */
  left: 50%;
  
  /* Kéo dài đến tâm của Node tiếp theo */
  /* Vì dùng flex: 1, width: 100% sẽ chạm đúng tâm của phần tử kế tiếp */
  width: 100%; 
  
  height: 3px;
  background-color: var(--border-color);
  transform: translateY(-50%);
  
  /* Nằm dưới Node */
  z-index: 1; 
  transition: background-color 0.4s ease;
}

/* Ẩn thanh nối ở bước cuối cùng vì không còn bước nào phía sau */
.stepItem:last-child .stepConnector {
  display: none;
}


/* === TRẠNG THÁI === */

/* Hoàn thành (Completed) */
.stepNode.completed {
  background-color: #28a745;
  border-color: #28a745;
  color: white;
}

.stepConnector.completed {
  background-color: #28a745;
}

.stepItem:has(.stepNode.completed) .stepName {
   color: var(--text-primary);
   font-weight: 600;
}

/* Đang hoạt động (Active) */
.stepNode.active {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: white;
  transform: scale(1.1);
  box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.2); /* Hiệu ứng glow nhẹ */
  z-index: 3; /* Nổi lên cao nhất */
}

.stepItem:has(.stepNode.active) .stepName {
  color: var(--primary-color);
  font-weight: 700;
}